function pwaforwpGetParamByName(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}jQuery(document).ready(function(e){if(pwaforwp_obj.do_tour){var a,t="<h3>You are awesome for using PWA for WP!</h3>";t+="<p>Do you want the latest on <b>PWA update</b> before others and some best resources on monetization in a single email? - Free just for users of ADS!</p>",t+='<style type="text/css">',t+=".wp-pointer-buttons{ padding:0; overflow: hidden; }",t+=".wp-pointer-content .button-secondary{  left: -25px;background: transparent;top: 5px; border: 0;position: relative; padding: 0; box-shadow: none;margin: 0;color: #0085ba;} .wp-pointer-content .button-primary{ display:none}\t#afw_mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }",t+="</style>",t+='<div id="afw_mc_embed_signup">',t+='<form action="//app.mailerlite.com/webforms/submit/o1s7u3" data-id="258182" data-code="o1s7u3" method="POST" target="_blank">',t+='<div id="afw_mc_embed_signup_scroll">',t+='<div class="afw-mc-field-group" style="    margin-left: 15px;    width: 195px;    float: left;">',t+='<input type="text" name="fields[name]" class="form-control" placeholder="Name" hidden value="'+pwaforwp_obj.current_user_name+'" style="display:none">',t+='<input type="text" value="'+pwaforwp_obj.current_user_email+'" name="fields[email]" class="form-control" placeholder="Email*"  style="      width: 180px;    padding: 6px 5px;">',t+='<input type="text" name="fields[company]" class="form-control" placeholder="Website" hidden style=" display:none; width: 168px; padding: 6px 5px;" value="'+pwaforwp_obj.get_home_url+'">',t+='<input type="hidden" name="ml-submit" value="1" />',t+="</div>",t+='<div id="mce-responses">',t+='<div class="response" id="mce-error-response" style="display:none"></div>',t+='<div class="response" id="mce-success-response" style="display:none"></div>',t+="</div>",t+='<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a631df13442f19caede5a5baf_c9a71edce6" tabindex="-1" value=""></div>',t+='<input type="submit" value="Subscribe" name="subscribe" id="pointer-close" class="button mc-newsletter-sent" style=" background: #0085ba; border-color: #006799; padding: 0px 16px; text-shadow: 0 -1px 1px #006799,1px 0 1px #006799,0 1px 1px #006799,-1px 0 1px #006799; height: 30px; margin-top: 1px; color: #fff; box-shadow: 0 1px 0 #006799;">',t+="</div>",t+="</form>";var o={content:t+="</div>",position:{edge:"top",align:"left"}};a=function(){e(pwaforwp_obj.displayID).pointer(o).pointer("open"),pwaforwp_obj.button2&&(jQuery("#pointer-close").after('<a id="pointer-primary" class="button-primary">'+pwaforwp_obj.button2+"</a>"),jQuery("#pointer-primary").click(function(){pwaforwp_obj.function_name}),jQuery("#pointer-close").click(function(){e.post(pwaforwp_obj.ajax_url,{pointer:"pwaforwp_subscribe_pointer",action:"dismiss-wp-pointer"})}))},(o=e.extend(o,{buttons:function(e,a){return button=jQuery('<a id="pointer-close" class="button-secondary">'+pwaforwp_obj.button1+"</a>"),button_2=jQuery("#pointer-close.button"),button.bind("click.pointer",function(){a.element.pointer("close")}),button_2.on("click",function(){a.element.pointer("close")}),button},close:function(){e.post(pwaforwp_obj.ajax_url,{pointer:"pwaforwp_subscribe_pointer",action:"dismiss-wp-pointer"})},show:function(e,a){a.pointer.css({left:"170px",top:"160px"})}})).position&&o.position.defer_loading?e(window).bind("load.wp-pointers",a):a()}e(".pwaforwp-colorpicker").wpColorPicker(),e(".pwaforwp-icon-upload").click(function(a){a.preventDefault();var t=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",function(){var a=t.state().get("selection").first().toJSON();e(".pwaforwp-icon").val(a.url)}).open()}),e(".pwaforwp-splash-icon-upload").click(function(a){a.preventDefault();var t=wp.media({title:pwaforwp_obj.splash_uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",function(){var a=t.state().get("selection").first().toJSON();e(".pwaforwp-splash-icon").val(a.url)}).open()}),e(".pwaforwp-tabs a").click(function(a){var t=e(this).attr("href"),o=pwaforwpGetParamByName("tab",t);return o||(o="dashboard"),e(this).siblings().removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".form-wrap").find(".pwaforwp-"+o).siblings().hide(),e(".form-wrap .pwaforwp-"+o).show(),window.history.pushState("","",t),!1}),"help"==pwaforwpGetParamByName("tab",window.location.href)&&(e(".pwaforwp-help").find("tr th:first").hide(),e(".pwaforwp-settings-form").find("p.submit").hide()),e(".pwaforwp-activate-service").on("click",function(a){e(".pwaforwp-settings-form #submit").click(),e(this).hide()}),e(".pwaforwp-service-activate").on("click",function(){var a=e(this).attr("data-id");return a&&e.ajax({url:ajaxurl,dataType:"json",data:{filetype:a,action:"pwaforwp_download_setup_files",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(t){"t"==t.status?(e(".pwaforwp-service-activate[data-id="+a+"]").hide(),e(".pwaforwp-service-activate[data-id="+a+"]").siblings(".dashicons").removeClass("dashicons-no-alt"),e(".pwaforwp-service-activate[data-id="+a+"]").siblings(".dashicons").addClass("dashicons-yes"),e(".pwaforwp-service-activate[data-id="+a+"]").siblings(".dashicons").css("color","#46b450")):e(".pwaforwp-service-activate[data-id="+a+"]").parent().next().removeClass("pwaforwp-hide")}}),!1}),e(".pwa-send-query").on("click",function(a){a.preventDefault();var t=e("#pwaforwp_query_message").val();e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_send_query_message",message:t,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(a){"t"==a.status?(e(".pwa-query-success").show(),e(".pwa-query-error").hide()):(e(".pwa-query-success").hide(),e(".pwa-query-error").show())},error:function(e){console.log(e)}})}),e(document).on("click",".pwaforwp-reset-settings",function(a){a.preventDefault(),1==confirm("Are you sure?")&&e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_reset_all_settings",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){setTimeout(function(){location.reload()},1e3)},error:function(e){console.log(e)}})}),e(".pwaforwp-feedback-notice-close").on("click",function(a){a.preventDefault(),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_review_notice_close",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(a){"t"==a.status&&e(".pwaforwp-feedback-notice").hide()},error:function(e){console.log(e)}})}),e(".pwaforwp-feedback-notice-remindme").on("click",function(a){a.preventDefault(),e.ajax({type:"POST",url:pwaforwp_obj.ajax_url,dataType:"json",data:{action:"pwaforwp_review_notice_remindme",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(a){"t"==a.status&&e(".pwaforwp-feedback-notice").hide()},error:function(e){console.log(e)}})}),e(".pwaforwp-manual-notification").on("click",function(a){a.preventDefault();var t=e("#pwaforwp_notification_message").val(),o=e("#pwaforwp_notification_message_title").val();""!=e.trim(t)?e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_send_notification_manually",message:t,title:o,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(a){if("t"==a.status){var t='<span style="color:green">Success: '+a.success+"</span><br>";e(".pwaforwp-notification-success").show(),e(".pwaforwp-notification-success").html(t),e(".pwaforwp-notification-error").hide()}else e(".pwaforwp-notification-success").hide(),e(".pwaforwp-notification-error").show()},error:function(e){console.log(e)}}):alert("Please enter the message")}),e("#pwaforwp_settings_utm_setting").click(function(){e(this).prop("checked")?e(".pwawp_utm_values_class").fadeIn():e(".pwawp_utm_values_class").fadeOut(200)}),e("#pwaforwp_settings_precaching_automatic").change(function(){e(this).prop("checked")?(e("#pwaforwp_settings_precaching_post_count").parent().parent().fadeIn(),e(".pwaforwp-pre-cache-table").parent().parent().fadeIn()):(e("#pwaforwp_settings_precaching_post_count").parent().parent().fadeOut(200),e(".pwaforwp-pre-cache-table").parent().parent().fadeOut(200))}).change(),e("#pwaforwp_settings_precaching_manual").change(function(){e(this).prop("checked")?e("#pwaforwp_settings_precaching_urls").parent().parent().parent().fadeIn():e("#pwaforwp_settings_precaching_urls").parent().parent().parent().fadeOut(200)}).change(),e(document).on("click",".pwaforwp-update-pre-caching-urls",function(a){a.preventDefault();var t=e(this);e.ajax({url:ajaxurl,dataType:"json",data:{action:"pwaforwp_update_pre_caching_urls",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){"t"==e.status?t.parent().parent().hide():alert("Something went wrong")}})}),e("#pwaforwp_precaching_method_selector").change(function(){"automatic"===e(this).val()?(e(".pwaforwp_precaching_table tr").eq(1).fadeIn(),e(".pwaforwp_precaching_table tr").eq(2).fadeOut(200)):(e(".pwaforwp_precaching_table tr").eq(1).fadeOut(200),e(".pwaforwp_precaching_table tr").eq(2).fadeIn())}),e(".pwaforwp-add-to-home-banner-settings").click(function(){e(this).prop("checked")?e(".pwaforwp-enable-on-desktop").removeClass("afw_hide"):(e(".pwaforwp-enable-on-desktop").addClass("afw_hide"),e("#enable_add_to_home_desktop_setting").prop("checked",!1))}),e(".pwaforwp-onesignal-support").click(function(){e(this).prop("checked")?e(".pwaforwp-onesignal-instruction").fadeIn():e(".pwaforwp-onesignal-instruction").fadeOut(200)}),e(".pwawp_utm_values_class").find("input").focusout(function(){e(this).attr("data-val")!==e(this).val()&&e("#pwa-utm_change_track").val("1")}),e(".pwaforwp-fcm-checkbox").click(function(){e(this).prop("checked")?e(this).parent().find("p").removeClass("pwaforwp-hide"):e(this).parent().find("p").addClass("pwaforwp-hide")})});